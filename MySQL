CREATE TABLE ISSUESLISTS (
  ID SERIAL PRIMARY KEY,
NAME VARCHAR(100) NOT NULL
);
CREATE TABLE ISSUES (
    ID SERIAL PRIMARY KEY,
    ISSUESLIST_ID BIGINT UNSIGNED NOT NULL,
    SUMMARY VARCHAR(100),
    DESCRIPTION VARCHAR(1024),
    USER_ID_ASSIGNEDTO BIGINT UNSIGNED NOT NULL,
    FOREIGN KEY (ISSUESLIST_ID) REFERENCES ISSUESLISTS(ID),
    FOREIGN KEY (USER_ID_ASSIGNEDTO) REFERENCES USERS(ID)
);
SELECT * FROM ISSUES;

INSERT INTO ISSUESLISTS (NAME)
VALUES ('ToDo');

INSERT INTO ISSUESLISTS (NAME)
VALUES ('In progress');

INSERT INTO ISSUESLISTS (NAME)
VALUES ('Done');
COMMIT;
SELECT * FROM ISSUESLISTS;

INSERT INTO ISSUES (ISSUESLIST_ID, SUMMARY, DESCRIPTION, USER_ID_ASSIGNEDTO)
VALUES (1, 'Zrobić zakupy spożywcze', 'Kupić chleb, mleko, jajka, itp.', 1);

INSERT INTO ISSUES (ISSUESLIST_ID, SUMMARY, DESCRIPTION, USER_ID_ASSIGNEDTO)
VALUES (1, 'Odebrać paczkę z poczty', 'Adres: ul. Warszawska 10', 2);

INSERT INTO ISSUES (ISSUESLIST_ID, SUMMARY, DESCRIPTION, USER_ID_ASSIGNEDTO)
VALUES (1, 'Zapłacić rachunki', 'Prąd, gaz, woda', 3);

INSERT INTO ISSUES (ISSUESLIST_ID, SUMMARY, DESCRIPTION, USER_ID_ASSIGNEDTO)
VALUES (1, 'Naprawić wyciek kranu', 'Kran w łazience', 4);

INSERT INTO ISSUES (ISSUESLIST_ID, SUMMARY, DESCRIPTION, USER_ID_ASSIGNEDTO)
VALUES (1, 'Odkurzyć mieszkanie', 'Przede wszystkim dywan w salonie', 5);

INSERT INTO ISSUES (ISSUESLIST_ID, SUMMARY, DESCRIPTION, USER_ID_ASSIGNEDTO)
VALUES (2, 'Napisać raport z projektu A', 'Opisać postępy prac i wstępne wyniki', 1);

INSERT INTO ISSUES (ISSUESLIST_ID, SUMMARY, DESCRIPTION, USER_ID_ASSIGNEDTO)
VALUES (2, 'Zaktualizować dokumentację produktu B', 'Poprawić błędy w dokumentacji', 2);

INSERT INTO ISSUES (ISSUESLIST_ID, SUMMARY, DESCRIPTION, USER_ID_ASSIGNEDTO)
VALUES (2, 'Przetestować nowy projekt', 'Zidentyfikować i opisać znalezione błędy', 3);

INSERT INTO ISSUES (ISSUESLIST_ID, SUMMARY, DESCRIPTION, USER_ID_ASSIGNEDTO)
VALUES (2, 'Przygotować nowe testy dla klienta', 'Opisać możliwości nowego produktu', 4);

INSERT INTO ISSUES (ISSUESLIST_ID, SUMMARY, DESCRIPTION, USER_ID_ASSIGNEDTO)
VALUES (2, 'Poprawić wydajność pracy', 'Zidentyfikować i wyeliminować brak motywacji', 5);

INSERT INTO ISSUES (ISSUESLIST_ID, SUMMARY, DESCRIPTION, USER_ID_ASSIGNEDTO)
VALUES (3, 'Zamknąć projekt A', 'Ukończyć wszystkie zadania i zapisać dokumentację', 2);

INSERT INTO ISSUES (ISSUESLIST_ID, SUMMARY, DESCRIPTION, USER_ID_ASSIGNEDTO)
VALUES (3, 'Przenieść produkt B na nową platformę', 'Zaktualizować kod i przetestować', 3);

INSERT INTO ISSUES (ISSUESLIST_ID, SUMMARY, DESCRIPTION, USER_ID_ASSIGNEDTO)
VALUES (3, 'Przygotować ofertę dla klienta C', 'Opisać koszty i terminy realizacji', 4);

INSERT INTO ISSUES (ISSUESLIST_ID, SUMMARY, DESCRIPTION, USER_ID_ASSIGNEDTO)
VALUES (3, 'Przeprowadzić reset serwera', 'Sprawdzić czy wszystko zostało zapisane',5);

COMMIT;

SELECT * FROM ISSUES;




SELECT ISSUES.ID, ISSUES.SUMMARY, ISSUES.DESCRIPTION, ISSUES.USER_ID_ASSIGNEDTO, ISSUESLISTS.NAME AS ISSUESLIST_NAME
FROM ISSUES
JOIN ISSUESLISTS ON ISSUES.ISSUESLIST_ID = ISSUESLISTS.ID;

SELECT ISSUES.ID, ISSUES.SUMMARY, ISSUES.DESCRIPTION, USERS.FIRSTNAME, USERS.LASTNAME
FROM ISSUES
JOIN USERS ON ISSUES.USER_ID_ASSIGNEDTO = USERS.ID;

SELECT USERS.FIRSTNAME, USERS.LASTNAME, COUNT(*) AS NUM_ISSUES
FROM ISSUES
JOIN USERS ON ISSUES.USER_ID_ASSIGNEDTO = USERS.ID
GROUP BY USERS.ID;
